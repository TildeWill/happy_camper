points:
  zones:
    wing_zone:
      # Fix placement on KiCAD sheet.
      anchor:
        shift: [ 100, -100 ]
      key: &switch_settings
        padding: 1ky
        spread: 1kx
        width: 1kx
        height: 1ky
        tags: "switches"
      columns:
        left:
          key:
            column_net: C0
        right:
          key:
            stagger: 3
            column_net: C1
      rows:
        mod:
          key.row_net: R0
        bottom:
          key.row_net: R1
        home:
          key.row_net: R2
        top:
          key.row_net: R3
        num:
          key.row_net: R4

    matrix_zone:
      key: *switch_settings
      anchor:
        ref: wing_zone_right_mod
        shift: [kx + 2okx + breakaway_tab_width, 0]
      columns:
        pinky:
          key:
            stagger: 3
            column_net: C2
        ring:
          key:
            stagger: 5
            column_net: C3
        middle:
          key:
            stagger: 3
            column_net: C4
        index:
          key:
            stagger: -3
            column_net: C5
        inner:
          key:
            stagger: -3
            column_net: C6
          rows.mod.skip: true
      rows:
        mod:
          key.row_net: R0
        bottom:
          key.row_net: R1
        home:
          key.row_net: R2
        top:
          key.row_net: R3
        num:
          key.row_net: R4

    module_key_zone:
      key:
        <<: *switch_settings
      anchor:
        ref: matrix_zone_inner_mod
        shift: [.5kx + okx + breakaway_tab_width + .5module_zone_width, 0]
      columns:
        middle: # middle first because it's the one that is perpendicular to everything
          key:
            splay:
        left:
          key:
            shift: [-2kx-okx, -oky]
            rotate: module_splay
        right:
          key:
            rotate: -module_splay
            shift: [-1kx+okx, -oky]
      rows:
        thumb:

    module_zone:
      anchor:
        ref: module_key_zone_middle_thumb
        shift: [ 0,.5ky + oky + .5module_size ]

    magnetic_connector_point:
      anchor:
        ref: module_zone

    mcu_center:
      anchor:
        ref: module_key_zone_middle_thumb
        shift: [-20, 60]

    battery_center:
      anchor:
        ref: mcu_center
        shift: [40,0]

    center_point:
      anchor:
        ref.aggregate.parts: [wing_zone_left_num, wing_zone_left_mod, matrix_zone_inner_num, matrix_zone_inner_mod]

    top_point:
      anchor:
        ref: matrix_zone_middle_num
        shift: [0, .5kx+okx]

    wing_rat_bites:
      key:
        spread: breakaway_tab_width
        padding: -2ky
        tags: rat_bite_points
      anchor:
        ref: wing_zone_right_top
        shift: [ .5kx + okx, 0 ]
      columns:
        left_edge:
        right_edge:
      rows:
        top:
        bottom:

    module_rat_bites:
      key:
        spread: breakaway_tab_width
        padding: -2ky
        tags: rat_bite_points
      anchor:
        ref: matrix_zone_inner_top
        shift: [ .5kx + okx, 0 ]
      columns:
        left_edge:
        right_edge:
      rows:
        top:
        bottom:
